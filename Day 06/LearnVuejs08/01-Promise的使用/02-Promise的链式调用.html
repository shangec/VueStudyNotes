<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>title</title>
</head>

<body>

    <script>
        // new Promise((resolve, reject) => {
        //     setTimeout(() => {
        //         resolve('aaa');
        //     }, 1000);
        // }).then(res => {
        //     console.log(res, "第一层");

        //     // 对结果进行第一次处理
        //     return new Promise((resolve) => {
        //         resolve(res + '111');
        //     })
        // }).then(res => {
        //     console.log(res, "第二层");

        //     // 对结果进行第二次处理
        //     return new Promise((resolve) => {
        //         resolve(res + '222');
        //     })
        // }).then(res => {
        //     console.log(res, "第三层");
        // })

        // // Promise简写
        // new Promise((resolve, reject) => {
        //     setTimeout(() => {
        //         resolve('aaa');
        //     }, 1000);
        // }).then(res => {
        //     console.log(res, "第一层");

        //     // 对结果进行第一次处理
        //     return Promise.resolve(res + '111');
        // }).then(res => {
        //     console.log(res, "第二层");

        //     // 对结果进行第二次处理
        //     return Promise.resolve(res + '222');
        // }).then(res => {
        //     console.log(res, "第三层");
        // })

        // 省略掉Promise.resolve()
        new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve('aaa');
            }, 1000);
        }).then(res => {
            console.log(res, "第一层");

            // 对结果进行第一次处理
            // return res + '111'
            // return Promise.reject('error message')
            throw 'error message'
        }).then(res => {
            console.log(res, "第二层");

            // 对结果进行第二次处理
            return res + '222'
        }).then(res => {
            console.log(res, "第三层");
        }).catch(err => {
            console.log(err)
        })
    </script>
</body>

</html>